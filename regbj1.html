<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>สรุปผลการขอเปิดรายวิชา 2/2568</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #1e3a8a;
            --success: #10b981;
            --success-bg: #d1fae5;
            --success-text: #065f46;
            --pending-bg: #fee2e2;
            --pending-text: #991b1b;
            --border-color: #e2e8f0;
            --admin-section-bg: #eff6ff;
        }

        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f1f5f9;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        h2 { color: var(--primary); margin: 0; }
        p.subtitle { color: #64748b; margin-top: 5px; }

        /* Dashboard Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        .stat-card {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            color: white;
        }
        .stat-total { background: #64748b; }
        .stat-done { background: var(--success); }
        .stat-wait { background: #ef4444; }

        /* Admin Section */
        .admin-section {
            background-color: var(--admin-section-bg);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #dbeafe;
            margin-bottom: 30px;
        }

        .admin-section h3 { margin-top: 0; color: var(--primary); font-size: 1.1rem; border-bottom: 2px solid #dbeafe; padding-bottom: 10px; margin-bottom: 15px; }

        .admin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
        }

        .admin-card {
            background: white;
            padding: 12px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.03);
            border: 1px solid #f0f7ff;
        }

        .admin-icon {
            background: var(--primary);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .admin-info h4 { margin: 0; color: #1e293b; font-size: 0.9rem; }
        .role-tag { font-size: 0.7rem; background: #e0e7ff; color: #3730a3; padding: 1px 6px; border-radius: 4px; font-weight: 600; margin-top: 3px; display: inline-block; }

        /* Table */
        .table-wrapper { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th {
            background-color: #f8fafc;
            color: #475569;
            font-weight: 600;
            text-align: left;
            padding: 15px;
            border-bottom: 2px solid var(--border-color);
        }
        td { padding: 12px 15px; border-bottom: 1px solid var(--border-color); color: #1e293b; font-size: 0.95rem; }
        tr:hover { background-color: #f8fafc; }

        .status-badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
        }
        .done { background: var(--success-bg); color: var(--success-text); }
        .waiting { background: var(--pending-bg); color: var(--pending-text); }

        /* Buttons */
        .btn {
            padding: 6px 12px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-family: 'Sarabun', sans-serif;
            font-size: 0.85rem;
            transition: 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        .btn-confirm { background-color: var(--success); color: white; }
        .btn-confirm:hover { background-color: #059669; transform: translateY(-1px); }
        .btn-view { background-color: #f1f5f9; color: #475569; border: 1px solid #cbd5e1; }
        .btn-view:hover { background-color: #e2e8f0; }

        .dept-tag {
            font-size: 0.8rem;
            font-weight: 600;
            padding: 2px 8px;
            border-left: 4px solid #ccc;
        }
        
        /* Department Colors */
        .dept-1 { border-color: #f43f5e; color: #f43f5e; }
        .dept-2 { border-color: #fbbf24; color: #b45309; }
        .dept-3 { border-color: #fb923c; color: #c2410c; }
        .dept-4 { border-color: #3b82f6; color: #1d4ed8; }
        .dept-5 { border-color: #10b981; color: #047857; }
        .dept-6 { border-color: #a855f7; color: #7e22ce; }
        .dept-7 { border-color: #14b8a6; color: #0f766e; }
        .dept-8 { border-color: #ec4899; color: #be185d; }
        .dept-9 { border-color: #64748b; color: #334155; }

        @media (max-width: 768px) {
            td, th { padding: 10px 5px; font-size: 0.8rem; }
            .btn { padding: 4px 8px; font-size: 0.75rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h2><i class="fas fa-university"></i> ระบบสรุปผลการขอเปิดรายวิชาและยืนยันเกรด</h2>
        <p class="subtitle">ภาคเรียนที่ 2 ปีการศึกษา 2568</p>
    </div>

    <div class="stats-grid">
        <div class="stat-card stat-total">
            <small>อาจารย์ทั้งหมด</small>
            <div id="totalTeachers" style="font-size: 1.5rem; font-weight: 600;">0</div>
        </div>
        <div class="stat-card stat-done">
            <small>ยืนยันข้อมูลแล้ว</small>
            <div id="confirmedCount" style="font-size: 1.5rem; font-weight: 600;">0</div>
        </div>
        <div class="stat-card stat-wait">
            <small>ยังไม่ดำเนินการ</small>
            <div id="pendingCount" style="font-size: 1.5rem; font-weight: 600;">0</div>
        </div>
    </div>

    <div class="admin-section">
        <h3><i class="fas fa-user-shield"></i> เจ้าหน้าที่ระบบประจำปีการศึกษา 2568</h3>
        <div class="admin-grid">
            <div class="admin-card">
                <div class="admin-icon"><i class="fas fa-laptop-code"></i></div>
                <div class="admin-info">
                    <h4>129 นายกีรติภัทร รัตนพิพัฒน์วงษ์ศิริ</h4>
                    <span class="role-tag">ผู้ดูแลระบบ</span> <span class="role-tag">งานวัดผล</span>
                </div>
            </div>
            <div class="admin-card">
                <div class="admin-icon"><i class="fas fa-address-book"></i></div>
                <div class="admin-info">
                    <h4>830 นายณัฏฐกิตติ์ โพธิ์พุ่ม</h4>
                    <span class="role-tag">นายทะเบียน</span>
                </div>
            </div>
        </div>
    </div>

    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>ลำดับ</th>
                    <th>รหัสครู</th>
                    <th>ชื่อ-นามสกุล</th>
                    <th>กลุ่มสาระ</th>
                    <th>สถานะ</th>
                    <th style="text-align: center;">ดำเนินการ</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>
</div>

<script>
    const departments = {
        "1": "ภาษาไทย", "2": "คณิตศาสตร์", "3": "วิทยาศาสตร์และเทคโนโลยี",
        "4": "สังคมศึกษา", "5": "สุขศึกษา", "6": "ศิลปะ",
        "7": "การงานอาชีพ", "8": "ภาษาต่างประเทศ", "9": "กลุ่มงานสนับสนุน"
    };

    const teacherData = [
        { id: "111", name: "นางสาววาสนา ด่วนดี", status: 1 },
        { id: "117", name: "นายวีระยุทธ โพธิ์สุวรรณ", status: 0 },
        { id: "129", name: "นายกีรติภัทร รัตนพิพัฒน์วงษ์ศิริ", status: 1 },
        { id: "222", name: "นางสาวเสาวลักษณ์ ชินวงษ์", status: 0 },
        { id: "333", name: "นายภูวนัย อ่อนสอาด", status: 1 },
        { id: "412", name: "นายนิคม วงษ์สุวรรณ", status: 0 },
        { id: "816", name: "นางสาวพัชรินทร์ ศรีทาคง", status: 1 },
        { id: "830", name: "นายณัฏฐกิตติ์ โพธิ์พุ่ม", status: 0 }
    ];

    function renderTable() {
        const tableBody = document.getElementById('tableBody');
        tableBody.innerHTML = '';
        
        let done = 0;
        teacherData.forEach((teacher, index) => {
            if(teacher.status === 1) done++;
            
            const deptId = teacher.id.charAt(0);
            const deptName = departments[deptId] || "ไม่ระบุ";
            const row = document.createElement('tr');

            row.innerHTML = `
                <td>${index + 1}</td>
                <td><strong>${teacher.id}</strong></td>
                <td>${teacher.name}</td>
                <td><div class="dept-tag dept-${deptId}">${deptName}</div></td>
                <td>
                    <span class="status-badge ${teacher.status === 1 ? 'done' : 'waiting'}">
                        ${teacher.status === 1 ? 'ยืนยันข้อมูลแล้ว' : 'ยังไม่ดำเนินการ'}
                    </span>
                </td>
                <td style="text-align: center;">
                    ${teacher.status === 0 
                        ? `<button class="btn btn-confirm" onclick="confirmGrade('${teacher.id}', '${teacher.name}')">
                            <i class="fas fa-check-circle"></i> ยืนยันส่งเกรด
                           </button>`
                        : `<button class="btn btn-view">
                            <i class="fas fa-search"></i> ดูใบสรุปเกรด
                           </button>`
                    }
                </td>
            `;
            tableBody.appendChild(row);
        });

        // Update Stats
        document.getElementById('totalTeachers').innerText = teacherData.length;
        document.getElementById('confirmedCount').innerText = done;
        document.getElementById('pendingCount').innerText = teacherData.length - done;
    }

    function confirmGrade(id, name) {
        if(confirm(`ยืนยันการส่งเกรดสำหรับ: ${name} (รหัส ${id})?`)) {
            const teacher = teacherData.find(t => t.id === id);
            if(teacher) {
                teacher.status = 1;
                renderTable();
                alert('ดำเนินการยืนยันข้อมูลเรียบร้อยแล้ว');
            }
        }
    }

    // Initial render
    renderTable();
</script>

</body>
</html>
