<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mario Exam Service</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Kanit:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --mario-red: #e4000f;
            --mario-blue: #049cd8;
            --mario-yellow: #fbd000;
            --mario-green: #43b047;
            --mario-brick: #ab3916;
        }

        * { 
            image-rendering: pixelated;
            font-family: 'Kanit', sans-serif;
        }

        .pixel-font { font-family: 'Press+Start+2P', cursive; font-size: 0.7rem; }

        body { 
            background-color: #5c94fc; /* สีท้องฟ้ามาริโอ้ */
            background-image: 
                linear-gradient(transparent 90%, rgba(0,0,0,0.1) 90%),
                linear-gradient(90deg, transparent 90%, rgba(0,0,0,0.1) 90%);
            background-size: 50px 50px;
        }

        /* กล่องสไตล์ Brick/Question Block */
        .mario-card {
            background: #fff;
            border: 6px solid #000;
            box-shadow: 8px 8px 0px #000;
            position: relative;
        }

        .brick-border {
            border: 6px solid #000;
            background-color: var(--mario-brick);
            box-shadow: inset -4px -4px 0px #6b240f, inset 4px 4px 0px #f19b7c;
        }

        /* ปุ่มสไตล์มาริโอ้ */
        .btn-mario {
            display: inline-block;
            padding: 10px 20px;
            border: 4px solid #000;
            box-shadow: 4px 4px 0px #000;
            color: white;
            text-transform: uppercase;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.1s;
        }

        .btn-mario:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px #000;
        }

        .btn-red { background: var(--mario-red); }
        .btn-green { background: var(--mario-green); }
        .btn-yellow { background: var(--mario-yellow); color: #000; }
        .btn-blue { background: var(--mario-blue); }

        /* ตารางสไตล์ Retro */
        .pixel-table { width: 100%; border-collapse: collapse; background: white; border: 4px solid #000; }
        .pixel-table th { background: #000; color: #fff; padding: 12px; font-size: 0.8rem; }
        .pixel-table td { border: 4px solid #000; padding: 10px; }

        /* ก้อนเมฆ */
        .cloud {
            width: 100px; height: 40px; background: #fff; border-radius: 20px;
            position: absolute; z-index: -1; opacity: 0.8;
        }

        /* Animation ตกใจเวลา error */
        .shake { animation: shake 0.5s; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .pipe-top {
            height: 30px; width: 100%; background: #43b047; border: 4px solid #000;
            border-bottom: none;
        }
    </style>
</head>
<body class="p-4 md:p-10">

<div class="cloud top-10 left-10"></div>
<div class="cloud top-40 right-20 scale-150"></div>

<div class="max-w-6xl mx-auto">
    <header class="text-center mb-12">
        <div class="inline-block bg-white border-4 border-black p-4 shadow-[6px_6px_0px_#000]">
            <p class="pixel-font text-red-600 mb-2">MARIO KPS WORLD</p>
            <h1 class="text-4xl md:text-6xl font-black tracking-tighter text-black uppercase">
                COURSE <span class="text-yellow-500">SELECT</span>
            </h1>
        </div>
        <div class="flex justify-center gap-4 mt-4">
            <div class="bg-black text-white px-4 py-1 pixel-font text-[10px]">TIME: 2568-P</div>
            <div class="bg-black text-white px-4 py-1 pixel-font text-[10px]">SCORE: <span id="totalCount">0</span></div>
        </div>
    </header>

    <section id="searchView" class="max-w-xl mx-auto py-10">
        <div class="mario-card p-8">
            <div class="pipe-top"></div>
            <div class="space-y-6">
                <div>
                    <label class="block font-bold text-sm mb-2 text-blue-800 uppercase">Insert Student ID Card</label>
                    <input type="text" id="studentId" 
                           class="w-full border-4 border-black p-4 text-2xl font-bold text-center focus:outline-none focus:bg-yellow-50" 
                           placeholder="0000000000">
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-gray-100 border-4 border-black p-2 text-center">
                        <p class="text-[10px] font-bold text-gray-500 uppercase">Semester</p>
                        <p class="font-bold">ปลาย 2568</p>
                    </div>
                    <div class="bg-gray-100 border-4 border-black p-2 text-center">
                        <p class="text-[10px] font-bold text-gray-500 uppercase">Exam Type</p>
                        <p class="font-bold">กลางภาค</p>
                    </div>
                </div>

                <button onclick="handleSearch()" class="btn-mario btn-red w-full text-xl py-4 pixel-font">
                    Press Start →
                </button>
            </div>
            <p id="errorMsg" class="mt-4 text-red-600 font-bold hidden text-center italic">! Game Over: ไม่พบข้อมูลนิสิต</p>
        </div>
    </section>

    <section id="resultView" class="hidden">
        <div class="mario-card bg-yellow-400 p-4 mb-6 border-4 border-black flex items-center gap-4">
            <div class="bg-white border-2 border-black p-2 pixel-font text-lg animate-bounce">?</div>
            <marquee class="font-bold text-black uppercase">
                ประกาศเตือน: นิสิตประเมินการสอน ครั้งที่ 1 วันที่ 5 - 9 มกราคม 2569 ผ่านระบบ MYKU ก่อนเข้าสู่ด่านถัดไป (สอบกลางภาค)
            </marquee>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="mario-card p-6 md:col-span-2">
                <p class="pixel-font text-blue-600 mb-2">PLAYER INFO</p>
                <h2 id="resName" class="text-3xl font-bold mb-1">-</h2>
                <p id="resId" class="text-xl font-bold text-gray-600 mb-4 border-b-4 border-dotted border-black pb-2">-</p>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm font-bold">
                    <div><span class="text-gray-400">FACULTY:</span> <span id="resFaculty"></span></div>
                    <div><span class="text-gray-400">MAJOR:</span> <span id="resMajor"></span></div>
                    <div><span class="text-gray-400">YEAR:</span> <span id="resYear"></span></div>
                    <div><span class="text-gray-400">TYPE:</span> <span id="resAdvisor"></span></div>
                </div>
            </div>

            <div class="flex flex-col gap-3">
                <a href="https://my.ku.th" target="_blank" class="btn-mario btn-blue text-center">MYKU Login</a>
                <button onclick="window.print()" class="btn-mario btn-green">Print Schedule</button>
                <button onclick="toggleOffCampus()" id="btnOffCampus" class="btn-mario btn-yellow text-sm">Off-Campus Subj</button>
                <button onclick="location.reload()" class="btn-mario bg-gray-500 text-white">Restart Game</button>
            </div>
        </div>

        <div class="mb-10 overflow-x-auto">
            <div class="bg-green-600 text-white p-2 border-x-4 border-t-4 border-black pixel-font text-[10px]">
                Main Level: Exam Schedule
            </div>
            <table class="pixel-table">
                <thead>
                    <tr>
                        <th>CODE</th>
                        <th>SUBJECT NAME</th>
                        <th>DATE</th>
                        <th>TIME</th>
                        <th>SEC</th>
                        <th>ROOM</th>
                    </tr>
                </thead>
                <tbody id="examTableBody"></tbody>
            </table>
        </div>

        <div id="offCampusContainer" class="hidden">
            <div class="bg-red-600 text-white p-2 border-x-4 border-t-4 border-black pixel-font text-[10px]">
                Bonus Level: Off-Campus Schedule
            </div>
            <table class="pixel-table" style="border-color: var(--mario-red);">
                <thead class="bg-red-600">
                    <tr class="bg-red-600">
                        <th class="bg-red-600">CODE</th>
                        <th class="bg-red-600">SUBJECT NAME</th>
                        <th class="bg-red-600">DATE</th>
                        <th class="bg-red-600">TIME</th>
                        <th class="bg-red-600">SEC</th>
                        <th class="bg-red-600">ROOM</th>
                    </tr>
                </thead>
                <tbody id="offCampusTableBody"></tbody>
            </table>
        </div>
    </section>
</div>

<footer class="mt-20 border-t-8 border-black bg-white p-6 text-center">
    <p class="pixel-font text-[8px]">© 2026 Developed by SUTHEE - Version 1.0.0-MARIO</p>
</footer>

<script>
    // ฐานข้อมูล (ข้อมูลเดิมทั้งหมด)
    const db = {
        "6720600494": { name: "นายเมธี ใจสุขดี", id: "6720600494", faculty: "ศึกษาศาสตร์และพัฒนศาสตร์", major: "เกษตรและสิ่งแวดล้อมศึกษา", dept: "การพัฒนาทรัพยากรมนุษย์และชุมชน", year: "F39-2", advisor: "กลางภาค ภาคปลาย/2568",
            exams: [
                { code: "01355102", titleEn: "English for University", titleTh: "ภาษาอังกฤษในมหาวิทยาลัย", date: "เสาร์ 10 ม.ค. 69", time: "13:00 - 15:30", sec: "710", room: "LH3-304" },
                { code: "02036271", titleEn: "Horticultural Science", titleTh: "วิทยาศาสตร์และเทคโนโลยีด้านพืชสวน", date: "จันทร์ 12 ม.ค. 69", time: "16:30 - 18:30", sec: "700", room: "LH4-201" },
                { code: "02036261", titleEn: "Soil Science", titleTh: "วิทยาศาสตร์ทางดิน", date: "พุธ 14 ม.ค. 69", time: "13:00 - 15:00", sec: "700", room: "KH80-208" }
            ],
            offCampus: [
                { code: "02181331", titleEn: "Communication in Ag-Env Ed", titleTh: "การสื่อสารทางเกษตรและสิ่งแวดล้อมศึกษา", date: "ศุกร์ 9 ม.ค. 69", time: "10.00-12.00", sec: "700/711", room: "EDS3-301" },
                { code: "02033302", titleEn: "Livestock and Thai Way", titleTh: "ปศุสัตว์กับวิถีชีวิตไทย", date: "จันทร์ 19 ม.ค. 69", time: "16.00-17.30", sec: "700", room: "LH4-102" }
            ]
        },
        // ... (เพิ่มข้อมูลนิสิตท่านอื่นๆ ได้ตามโครงสร้างเดิม)
        "6720600656": { name: "นายสิทธิชาติ ทองนุ่น", id: "6720600656", faculty: "ศึกษาศาสตร์และพัฒนศาสตร์", major: "เกษตรและสิ่งแวดล้อมศึกษา", dept: "การพัฒนาทรัพยากรมนุษย์และชุมชน", year: "F39-2", advisor: "กลางภาค ภาคปลาย/2568",
            exams: [
                { code: "01355102", titleEn: "English for University", titleTh: "ภาษาอังกฤษในมหาวิทยาลัย", date: "เสาร์ 10 ม.ค. 69", time: "13:00 - 15:30", sec: "710", room: "LH3-304" },
                { code: "02036271", titleEn: "Horticultural Science", titleTh: "วิทยาศาสตร์และเทคโนโลยีด้านพืชสวน", date: "จันทร์ 12 ม.ค. 69", time: "16:30 - 18:30", sec: "700", room: "LH4-201" },
                { code: "01419211", titleEn: "General Microbiology", titleTh: "จุลชีววิทยาทั่วไป", date: "อังคาร 13 ม.ค. 69", time: "09:00 - 12:00", sec: "700", room: "LH3-211" }
            ],
            offCampus: [
                { code: "02181331", titleEn: "Communication in Ag-Env Ed", titleTh: "การสื่อสารทางเกษตรและสิ่งแวดล้อมศึกษา", date: "ศุกร์ 9 ม.ค. 69", time: "10.00-12.00", sec: "700/711", room: "EDS3-301" }
            ]
        },
        // ดึงข้อมูลตัวอย่างตัวอื่นๆ มาใส่ตรงนี้ได้เลย (ตามต้นฉบับที่คุณให้มา)
    };

    // หมายเหตุ: ในโค้ดตัวอย่างนี้ผมใส่ db ไว้ 2 คนเพื่อประหยัดพื้นที่ คุณสามารถ Copy ข้อมูลจากโค้ดเดิมมาวางทับได้เลยครับ

    function handleSearch() {
        const idInput = document.getElementById('studentId').value.trim();
        const student = db[idInput];
        const searchBox = document.querySelector('.mario-card');
        
        if (student) {
            document.getElementById('searchView').classList.add('hidden');
            document.getElementById('resultView').classList.remove('hidden');
            document.getElementById('resName').innerText = student.name;
            document.getElementById('resId').innerText = "PLAYER ID: " + student.id;
            document.getElementById('resFaculty').innerText = student.faculty;
            document.getElementById('resMajor').innerText = student.major;
            document.getElementById('resYear').innerText = student.year;
            document.getElementById('resAdvisor').innerText = student.advisor;

            renderTable('examTableBody', student.exams);
            renderTable('offCampusTableBody', student.offCampus);
        } else {
            document.getElementById('errorMsg').classList.remove('hidden');
            searchBox.classList.add('shake');
            setTimeout(() => searchBox.classList.remove('shake'), 500);
        }
    }

    function renderTable(targetId, data) {
        const tbody = document.getElementById(targetId);
        if(!data || data.length === 0) {
            tbody.innerHTML = '<tr><td colspan="6" class="text-center py-10 font-bold uppercase italic">No Data Found</td></tr>';
            return;
        }
        tbody.innerHTML = data.map(ex => `
            <tr class="hover:bg-yellow-50 transition">
                <td class="font-bold text-blue-700 text-center">${ex.code}</td>
                <td>
                    <div class="font-bold uppercase tracking-tighter">${ex.titleEn}</div>
                    <div class="text-[10px] text-gray-400 font-bold">${ex.titleTh}</div>
                </td>
                <td class="text-center font-bold">${ex.date}</td>
                <td class="text-center font-bold text-red-600">${ex.time}</td>
                <td class="text-center font-bold bg-blue-50">${ex.sec}</td>
                <td class="text-center font-bold bg-gray-100 uppercase">${ex.room}</td>
            </tr>
        `).join('');
    }

    function toggleOffCampus() {
        const container = document.getElementById('offCampusContainer');
        const btn = document.getElementById('btnOffCampus');
        if (container.classList.contains('hidden')) {
            container.classList.remove('hidden');
            btn.innerText = "Hide Bonus Level";
            container.scrollIntoView({ behavior: 'smooth' });
        } else {
            container.classList.add('hidden');
            btn.innerText = "Off-Campus Subj";
        }
    }

    window.onload = function() {
        let visits = localStorage.getItem('visitCount') || 1248;
        visits = parseInt(visits) + 1;
        localStorage.setItem('visitCount', visits);
        document.getElementById('totalCount').innerText = visits.toLocaleString();
    };
</script>

</body>
</html>
