<!-- ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô <body> ‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡πÅ‡∏•‡∏∞ <script> ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î (‡πÉ‡∏ä‡πâ‡πÅ‡∏ó‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢) -->
<body class="bg-gray-100 p-6">

  <!-- ... ‡∏™‡πà‡∏ß‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° ... -->

  <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á -->
  <h2 class="text-xl font-semibold text-gray-700 mt-6">üìù ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß:</h2>
  <table class="min-w-full text-sm mt-2 border border-gray-300">
    <thead class="bg-blue-100 text-blue-900">
      <tr>
        <th class="px-4 py-2 border">‡∏ß‡∏¥‡∏ä‡∏≤</th>
        <th class="px-4 py-2 border">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
        <th class="px-4 py-2 border">‡πÄ‡∏ß‡∏•‡∏≤</th>
        <th class="px-4 py-2 border">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
      </tr>
    </thead>
    <tbody id="recordTable" class="bg-white"></tbody>
  </table>

  <!-- ... ‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏û‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° ... -->

  <script>
    const subjects = {
      '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå': '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏û‡∏µ‡∏ä‡∏Ñ‡∏ì‡∏¥‡∏ï ‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï ‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥',
      '‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©': '‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô ‡∏ü‡∏±‡∏á ‡∏û‡∏π‡∏î ‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©',
      '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå': '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå ‡πÄ‡∏Ñ‡∏°‡∏µ ‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°',
      '‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤': '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏®‡∏≤‡∏™‡∏ô‡∏≤'
    };

    let selectedSubject = '';

    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å localStorage ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤
    window.onload = () => {
      const saved = JSON.parse(localStorage.getItem("attendanceRecords")) || [];
      saved.forEach(record => addRowToTable(record));
    };

    function showSubject(subject) {
      selectedSubject = subject;
      document.getElementById("subjectInfo").textContent = subjects[subject];
      document.getElementById("selectedDate").value = '';
      document.getElementById("attendanceStatus").value = '';
      document.getElementById("subjectDetails").classList.remove('hidden');
    }

    function openModal() {
      const date = document.getElementById("selectedDate").value;
      const status = document.getElementById("attendanceStatus").value;

      if (!date || !status) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏Å‡πà‡∏≠‡∏ô");
        return;
      }

      const text = `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n‡∏ß‡∏¥‡∏ä‡∏≤: ${selectedSubject}\n‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${formatDate(date)}\n‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${status}`;
      document.getElementById("confirmText").textContent = text;
      document.getElementById("confirmModal").classList.remove('hidden');
      document.getElementById("confirmModal").classList.add('flex');
    }

    function closeModal() {
      document.getElementById("confirmModal").classList.add('hidden');
      document.getElementById("confirmModal").classList.remove('flex');
    }

    function confirmSave() {
      const date = document.getElementById("selectedDate").value;
      const status = document.getElementById("attendanceStatus").value;
      const timeStr = new Date().toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit' });

      const record = {
        subject: selectedSubject,
        date: date,
        time: timeStr,
        status: status
      };

      // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage
      let records = JSON.parse(localStorage.getItem("attendanceRecords")) || [];
      records.push(record);
      localStorage.setItem("attendanceRecords", JSON.stringify(records));

      // ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
      addRowToTable(record);

      closeModal();
    }

    function addRowToTable(record) {
      const table = document.getElementById("recordTable");
      const row = document.createElement("tr");

      row.innerHTML = `
        <td class="border px-4 py-2">${record.subject}</td>
        <td class="border px-4 py-2">${formatDate(record.date)}</td>
        <td class="border px-4 py-2">${record.time}</td>
        <td class="border px-4 py-2">${record.status}</td>
      `;
      table.appendChild(row);
    }

    function formatDate(iso) {
      const d = new Date(iso);
      return d.toLocaleDateString('th-TH', {
        weekday: 'short', year: 'numeric', month: 'short', day: 'numeric'
      });
    }
  </script>
</body>
